PREFIX csa: <https://omilab.org/experiments/city-swift-aid#>

SELECT ?person ?treatmentLevel ?pair WHERE {
    ?person csa:matchesMeasurement ?treatmentLevel .
    ?treatmentLevel csa:hasMeasurementValuePair ?pair
}


PREFIX csa: <https://omilab.org/experiments/city-swift-aid#>

SELECT ?person ?medicalIssue WHERE {
    ?person csa:hasDetectedMedicalIssue ?medicalIssue .
}



PREFIX csa: <https://omilab.org/experiments/city-swift-aid#>

SELECT ?responder ?emergency WHERE {
  ?responder csa:qualifiedForEmergency ?emergency
}




PREFIX csa: <https://omilab.org/experiments/city-swift-aid#>

SELECT ?person ?measurementType ?value WHERE {
    ?person csa:hasHealthMeasurement ?measurementPair .
    ?measurementPair csa:hasMeasurement ?measurementType .
    ?measurementPair csa:hasValue ?value .
}


PREFIX csa: <https://omilab.org/experiments/city-swift-aid#>

SELECT ?person ?emergency WHERE {
    ?emergency csa:happensOn ?person .
}



PREFIX csa: <https://omilab.org/experiments/city-swift-aid#>

SELECT ?person ?medicalIssue WHERE {
    ?person csa:hasDetectedMedicalIssue ?medicalIssue .
}



PREFIX csa: <https://omilab.org/experiments/city-swift-aid#>

SELECT ?responder ?emergency ?person WHERE {
  ?responder csa:qualifiedForEmergency ?emergency .
}



PREFIX csa: <https://omilab.org/experiments/city-swift-aid#>

SELECT ?person ?treatmentLevel ?medicalIssue WHERE {
    # Get a person with measurements
    ?person csa:hasHealthMeasurement ?personMeasurement .
    ?personMeasurement csa:hasMeasurement ?measurementType .
    ?personMeasurement csa:hasValue ?personValue .

    # Get treatment levels with the same measurement type
    ?treatmentLevel csa:hasMeasurementValuePair ?requiredMeasurement .
    ?requiredMeasurement csa:hasMeasurement ?measurementType .
    ?requiredMeasurement csa:hasValue ?requiredValue .

    # Get the medical issue for context
    ?medicalIssue csa:hasTreatmentLevel ?treatmentLevel .

    FILTER(?personValue = ?requiredValue)
}

